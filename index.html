<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VoxyStore - Joki</title>
<style>
:root{--bg:#0b1620;--card:#162231;--muted:#9fb2b0;--accent:#00ff95;--dark:#0f1b29;--panel:#1b2a3a;}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,Arial,sans-serif;background:var(--bg);color:#ecf0f1}
.hidden{display:none}
.sidebar{height:100%;width:0;position:fixed;z-index:100;top:0;left:0;background:var(--card);overflow-x:hidden;transition:0.3s;padding-top:60px;}
.sidebar a{padding:12px 24px;text-decoration:none;font-size:18px;display:block;color:#ddd;transition:0.2s;}
.sidebar a:hover{background:var(--accent);color:#081018}
.openbtn{font-size:20px;cursor:pointer;background:var(--accent);color:#081018;padding:10px 15px;border:none;border-radius:6px;margin:10px;}
#main{transition:margin-left .3s;padding:16px;}
.page{display:none;animation:fade .4s}
@keyframes fade{from{opacity:0}to{opacity:1}}
h2{color:var(--accent)}
.btn{padding:10px 15px;border:none;border-radius:8px;background:var(--accent);color:#081018;font-weight:bold;cursor:pointer}
.box{background:var(--card);padding:18px;border-radius:12px;width:92%;max-width:460px}
.input-group{display:flex;gap:8px;align-items:center}
.input-group input{flex:1;padding:8px;border-radius:8px;border:0;background:#0b2634;color:#fff}
.toggle-btn{padding:7px 10px;border-radius:8px;border:0;background:var(--accent);color:#081018;cursor:pointer}
textarea,input,select{width:100%;padding:8px;border-radius:8px;border:0;background:#0b2634;color:#fff;margin-top:6px}
.orders{background:var(--dark);padding:14px;border-radius:10px;margin-top:18px}
.order-item{background:var(--panel);padding:10px;border-radius:8px;margin-bottom:10px;display:flex;align-items:center;gap:10px}
.order-item img.avatar{width:70px;height:70px;border-radius:50%;}
.status{display:inline-block;padding:4px 8px;border-radius:8px;font-weight:700;font-size:13px}
.status.Tahap{background:#e67e22}
.status.Proses{background:#3498db}
.status.Done{background:#2ecc71}
#avatarPreview{width:80px;height:80px;border-radius:50%;margin-top:6px;display:none;}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginPage" style="min-height:100vh;display:flex;align-items:center;justify-content:center">
  <div class="box" style="text-align:center">
    <h2 id="loginTitle">Login</h2>
    <input id="loginUser" type="text" placeholder="Username">
    <div class="input-group" style="margin-top:10px">
      <input id="loginPass" type="password" placeholder="Password">
      <button class="toggle-btn" type="button" onclick="toggleInput('loginPass')">üëÅ</button>
    </div>
    <div id="confirmBox" class="input-group hidden" style="margin-top:10px">
      <input id="loginConfirm" type="password" placeholder="Konfirmasi Password">
      <button class="toggle-btn" type="button" onclick="toggleInput('loginConfirm')">üëÅ</button>
    </div>
    <div style="margin-top:12px">
      <button id="authBtn" class="btn" onclick="handleAuth()">Login</button>
    </div>
    <p id="loginError" style="color:#ff6b6b;display:none;margin-top:8px">Username / Password salah!</p>
    <p style="margin-top:12px">
      <span id="toggleSignup" style="color:var(--accent);cursor:pointer" onclick="enterSignupMode()">Belum punya akun? Sign Up</span>
    </p>
  </div>
</div>

<!-- MAIN -->
<div id="mainPage" class="hidden">
  <div id="mySidebar" class="sidebar"></div>
  <button class="openbtn" onclick="openNav()">‚ò∞ Menu</button>
  <div id="main">
    <!-- Home -->
    <div id="home" class="page">
      <h2>Selamat Datang di VoxyStore</h2>
      <p>Tempat order joki game dengan proses mudah dan aman.</p>
      <button class="btn" onclick="showPage('order')">Order Sekarang</button>
    </div>

    <!-- List Joki -->
    <div id="list" class="page">
      <h2>List Order Joki</h2>
      <div class="orders">
        <div id="orderList"></div>
        <p id="noOrders"></p>
      </div>
    </div>

    <!-- Form Order -->
    <div id="order" class="page">
      <h2>Form Order Joki</h2>
      <form id="jokiForm">
        <label>Username Roblox</label>
        <input id="username" type="text" required oninput="updateAvatarPreview()">
        <img id="avatarPreview" alt="Avatar Roblox">

        <label>Password (opsional)</label>
        <div class="input-group">
          <input id="password" type="password">
          <button class="toggle-btn" type="button" onclick="toggleInput('password')">üëÅ</button>
        </div>

        <label>Kebutuhan Joki</label>
        <select id="jenisJoki" onchange="updateHarga()" required>
          <option value="">Pilih jenis joki...</option>
          <option value="Sea1">Sea 1 100 level</option>
          <option value="Sea2">Sea 2 100 level</option>
          <option value="Sea3">Sea 3 100 level</option>
          <option value="RaidNormal">Raid Normal</option>
          <option value="RaidAdvanced">Raid Advanced</option>
          <option value="RaidAdvancedFW">Raid Advanced FW</option>
          <option value="TrialGendong">Trial Gendong</option>
          <option value="TrialJoki">Trial Joki</option>
        </select>
        <p id="hargaJoki" style="margin:4px 0; font-weight:bold;"></p>

        <textarea id="kebutuhan" placeholder="Detail tambahan..." required></textarea>

        <label>Pembayaran</label>
        <select id="pembayaran" required>
          <option value="">Pilih...</option>
          <option>Dana</option>
          <option>Ovo</option>
          <option>Gopay</option>
          <option>Qris</option>
        </select>

        <label>Upload Bukti Transfer</label>
        <input id="bukti" type="file" accept="image/*" required>

        <button type="submit" class="btn" style="margin-top:10px">Kirim Order</button>
      </form>
    </div>
  </div>
</div>

<script>
const ACC_KEY="vs_acc", LOGIN_KEY="vs_login", ORD_KEY="vs_orders";
let orders = JSON.parse(localStorage.getItem(ORD_KEY)) || [];
let currentUser = null;
let signupMode = false;
const hargaMap = {
  Sea1: 7000, Sea2: 5000, Sea3: 3000,
  RaidNormal:1000,RaidAdvanced:3000,RaidAdvancedFW:12000,
  TrialGendong:5000,TrialJoki:10000
};

/* Admin default */
(function(){
  let acc = JSON.parse(localStorage.getItem(ACC_KEY)) || [];
  if(!acc.some(a=>a.user==="admin")){
    acc.push({user:"admin",pass:"12345",role:"admin"});
    localStorage.setItem(ACC_KEY,JSON.stringify(acc));
  }
})();

/* Toggle password */
function toggleInput(id){
  const el = document.getElementById(id);
  el.type = el.type==="password"?"text":"password";
}

/* Login/Signup */
function enterSignupMode(){
  signupMode=true;
  document.getElementById("loginTitle").textContent="Sign Up";
  document.getElementById("confirmBox").classList.remove("hidden");
  document.getElementById("authBtn").textContent="Sign Up";
  const toggle = document.getElementById("toggleSignup");
  toggle.textContent="Sudah punya akun? Login";
  toggle.onclick=exitSignupMode;
}
function exitSignupMode(){
  signupMode=false;
  document.getElementById("loginTitle").textContent="Login";
  document.getElementById("confirmBox").classList.add("hidden");
  document.getElementById("authBtn").textContent="Login";
  const toggle = document.getElementById("toggleSignup");
  toggle.textContent="Belum punya akun? Sign Up";
  toggle.onclick=enterSignupMode;
}
function handleAuth(){
  const u=document.getElementById("loginUser").value.trim();
  const p=document.getElementById("loginPass").value;
  const c=document.getElementById("loginConfirm").value;
  if(!u||!p||(signupMode&&!c)){alert("Isi semua field!");return;}
  let acc = JSON.parse(localStorage.getItem(ACC_KEY)) || [];
  if(signupMode){
    if(p!==c){alert("Password tidak cocok!");return;}
    if(acc.some(a=>a.user===u)){alert("Username sudah dipakai!");return;}
    acc.push({user:u,pass:p,role:"user"});
    localStorage.setItem(ACC_KEY,JSON.stringify(acc));
    alert("Akun berhasil dibuat!"); exitSignupMode();
  }else{
    let f=acc.find(a=>a.user===u&&a.pass===p);
    if(!f){document.getElementById("loginError").style.display="block";return;}
    currentUser=f; localStorage.setItem(LOGIN_KEY,JSON.stringify(f));
    showMain();
  }
}

/* Main */
function showMain(){
  document.getElementById("loginPage").style.display="none";
  document.getElementById("mainPage").classList.remove("hidden");
  renderSidebar();
  showPage('home');
  renderOrders();
}
function logout(){localStorage.removeItem(LOGIN_KEY);location.reload();}

/* Sidebar */
function renderSidebar(){
  const sb=document.getElementById("mySidebar");
  sb.innerHTML='<a href="javascript:void(0)" onclick="closeNav()">‚úñ Tutup</a>';
  sb.innerHTML+='<a href="#" onclick="showPage(\'home\')">üè† Home</a>';
  sb.innerHTML+='<a href="#" onclick="showPage(\'list\')">üìã List Joki</a>';
  sb.innerHTML+='<a href="#" onclick="showPage(\'order\')">üéÆ Daftar Joki</a>';
  if(currentUser.role==="admin") sb.innerHTML+='<a href="#">üõ† Admin Panel</a>';
  sb.innerHTML+='<a href="#" onclick="logout()">üö™ Logout</a>';
}
function openNav(){document.getElementById("mySidebar").style.width="200px";document.getElementById("main").style.marginLeft="200px";}
function closeNav(){document.getElementById("mySidebar").style.width="0";document.getElementById("main").style.marginLeft="0";}
function showPage(p){document.querySelectorAll(".page").forEach(pg=>pg.style.display="none");document.getElementById(p).style